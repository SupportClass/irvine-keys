<link rel="import" href="../themes/all.html">
<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="app-connection-status.html">
<link rel="import" href="app-device.html">
<link rel="import" href="app-keyconfig.html">

<dom-module id="keys-app">
	<template>
		<style include="iron-flex iron-flex-alignment">
			:host {
				display: block;
				position: absolute;
				top: 0;
				left: 0;
				font-family: Roboto, sans-serif;
				width: 100%;
				height: 100%;
				background-image: linear-gradient(to bottom, #202225 0%, #16181a 100%);
				/*background: url("../img/app-reference.png");*/
				@apply --layout-horizontal;
			}

			#error {
				background-color: white;
				padding: 0.5em;
				border: 2px solid red;
				@apply --layout-horizontal;
				@apply --layout-center-center;
			}

			#error-message {
				color: #AD0000;
			}

			#error-ack {
				@apply --layout-flex-none;
				margin-left: 1em;
			}

			app-connection-status {
				position: absolute;
				z-index: 1;
				top: 35px;
				right: 35px;
			}

			app-device {
				margin-top: 35px;
			}

			app-keyconfig {
				padding-top: 99px;
				padding-left: 3px;
			}

			[hidden] {
				display: none !important;
			}
		</style>

		<div class="layout vertical center" style="position: relative; padding-left: 8px;">
			<div id="error" hidden="[[!error]]">
				<div id="error-message">[[error]]</div>
				<paper-button id="error-ack" on-tap="ackError" raised>Acknowledge</paper-button>
			</div>
			<app-connection-status></app-connection-status>
			<app-device
				keys="[[keys]]"
				selected-key-ids="{{selectedKeyIds}}"
				row-size="{{rowSize}}"
				column-size="{{columnSize}}">
			</app-device>
		</div>

		<app-keyconfig
			selected-key-ids="[[selectedKeyIds]]"
			on-group-keys="_groupKeys">
		</app-keyconfig>
	</template>

	<script src="keys-app.js"></script>
</dom-module>
